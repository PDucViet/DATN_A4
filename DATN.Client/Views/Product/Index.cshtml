@model List<DATN.Core.ViewModel.ProductVM.ProductVM>

<style>
    .card-horizontal {
        display: flex;
        flex: 1 1 auto;
    }

        .card-horizontal img {
            width: 150px;
            height: auto;
        }

    .card-body {
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

        .card-body .row {
            align-items: center;
        }

        .card-body .col {
            margin-bottom: 0.5rem;
        }
</style>

<!-- body -->
<div class="row ms-2">
    <div class="col">
        <h2>Products</h2>
    </div>
    <!-- <div class="col">
        <div class="btn-group" role="group" aria-label="Basic outlined example">
            <button type="button" class="btn btn-outline-primary">Left</button>
            <button type="button" class="btn btn-outline-primary">Middle</button>
          </div>
    </div> -->
</div>

<!-- product -->
<div class="row">
    @* <div class="col-2">
        <!-- Select 1 -->
        <div class="accordion mb-3" id="mainAccordion1">
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingMain1">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseMain1" aria-expanded="true" aria-controls="collapseMain1">
                        Categories
                    </button>
                </h2>
                <div id="collapseMain1" class="accordion-collapse collapse show" aria-labelledby="headingMain1">
                    <div class="accordion-body">
                        <div class="accordion" id="categoriesAccordion1">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingTwo1">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo1" aria-expanded="false" aria-controls="collapseTwo1">
                                        Bags
                                    </button>
                                </h2>
                                <div id="collapseTwo1" class="accordion-collapse collapse" aria-labelledby="headingTwo1">
                                    <div class="accordion-body">
                                        <div class="accordion" id="bagsAccordion1">
                                            <div class="accordion-item">
                                                <h2 class="accordion-header" id="headingSubOne1">
                                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSubOne1" aria-expanded="false" aria-controls="collapseSubOne1">
                                                        Handbags
                                                    </button>
                                                </h2>
                                                <div id="collapseSubOne1" class="accordion-collapse collapse" aria-labelledby="headingSubOne1">
                                                    <div class="accordion-body">
                                                        <!-- Nội dung bên trong danh mục con -->
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="accordion-item">
                                                <h2 class="accordion-header" id="headingSubTwo1">
                                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSubTwo1" aria-expanded="false" aria-controls="collapseSubTwo1">
                                                        Backpacks
                                                    </button>
                                                </h2>
                                                <div id="collapseSubTwo1" class="accordion-collapse collapse" aria-labelledby="headingSubTwo1">
                                                    <div class="accordion-body">
                                                        <!-- Nội dung bên trong danh mục con -->
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Thêm các danh mục khác ở đây nếu cần -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Select 2 -->
        <div class="accordion mt-3 mb-3" id="mainAccordion2">
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingMain2">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseMain2" aria-expanded="true" aria-controls="collapseMain2">
                        Categories
                    </button>
                </h2>
                <div id="collapseMain2" class="accordion-collapse collapse show" aria-labelledby="headingMain2">
                    <div class="accordion-body">
                        <div class="accordion" id="categoriesAccordion2">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingTwo2">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo2" aria-expanded="false" aria-controls="collapseTwo2">
                                        Bags
                                    </button>
                                </h2>
                                <div id="collapseTwo2" class="accordion-collapse collapse" aria-labelledby="headingTwo2">
                                    <div class="accordion-body">
                                        <div class="accordion" id="bagsAccordion2">
                                            <div class="accordion-item">
                                                <h2 class="accordion-header" id="headingSubOne2">
                                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSubOne2" aria-expanded="false" aria-controls="collapseSubOne2">
                                                        Handbags
                                                    </button>
                                                </h2>
                                                <div id="collapseSubOne2" class="accordion-collapse collapse" aria-labelledby="headingSubOne2">
                                                    <div class="accordion-body">
                                                        <!-- Nội dung bên trong danh mục con -->
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="accordion-item">
                                                <h2 class="accordion-header" id="headingSubTwo2">
                                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSubTwo2" aria-expanded="false" aria-controls="collapseSubTwo2">
                                                        Backpacks
                                                    </button>
                                                </h2>
                                                <div id="collapseSubTwo2" class="accordion-collapse collapse" aria-labelledby="headingSubTwo2">
                                                    <div class="accordion-body">
                                                        <!-- Nội dung bên trong danh mục con -->
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Thêm các danh mục khác ở đây nếu cần -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Select 3 -->
        <div class="accordion mt-3 mb-3" id="mainAccordion3">
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingMain3">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseMain3" aria-expanded="true" aria-controls="collapseMain3">
                        Select Size
                    </button>
                </h2>
                <div id="collapseMain3" class="accordion-collapse collapse show" aria-labelledby="headingMain3">
                    <div class="accordion-body">
                        <div class="btn-group" role="group" aria-label="Size selection">
                            <button type="button" class="btn btn-outline-secondary">XS</button>
                            <button type="button" class="btn btn-outline-secondary">S</button>
                            <button type="button" class="btn btn-outline-secondary">M</button>
                            <button type="button" class="btn btn-outline-secondary">L</button>
                            <button type="button" class="btn btn-outline-secondary">XL</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Select 4 -->
        <div class="accordion mt-3 mb-3" id="mainAccordion4">
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingMain4">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseMain4" aria-expanded="true" aria-controls="collapseMain4">
                        Select Color
                    </button>
                </h2>
                <div id="collapseMain4" class="accordion-collapse collapse show" aria-labelledby="headingMain4">
                    <div class="accordion-body">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="colorBlue">
                            <label class="form-check-label" for="colorBlue">
                                <span class="color-circle color-blue"></span> Blue
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="colorRed">
                            <label class="form-check-label" for="colorRed">
                                <span class="color-circle color-red"></span> Red
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="colorGreen">
                            <label class="form-check-label" for="colorGreen">
                                <span class="color-circle color-green"></span> Green
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="colorDark">
                            <label class="form-check-label" for="colorDark">
                                <span class="color-circle color-dark"></span> Dark
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div> *@
    <div class="">
        <div class="row justify-content-center">
            <div class="col-4">
                <div class="input-group ms-3 mb-3 ">
                    <input type="text" class="form-control" placeholder="Search" aria-label="Recipient's username" aria-describedby="basic-addon2">
                    <span class="input-group-text" id="basic-addon2"><i class="bi bi-search"></i></span>
                </div>
            </div>
            <div class="col-8">
                <p>
                    <a asp-action="Create" class="btn btn-success">Create New</a>
                </p>
            </div>
        </div>

        <table class="table ms-3 mb-3">
            <thead>
            </thead>
            <tbody>
                @if (Model != null && Model.Count > 0)
                {
                    @foreach (var item in Model)
                    {
                        @*   var defaultImage = item.Images?.FirstOrDefault(img =>
                img.IsDefault == true)?.ImagePath; *@
                        <div class="card">
                            <div class="row card-horizontal">
                                <div class="col-auto">
                                    <img src="@item.imagePath" class="img-fluid" alt="Oculus VR
                        </div>
                        <div class="col">
                                    <div class="card-body">
                                        <h5 class="card-title">@item.Name</h5>
                                        <p class="card-text text-muted">@item.Description</p>
                                        <div class="row">
                                            <div class="col">
                                                <p class="mb-0"><strong>Số lượng</strong></p>
                                                <p class="mb-0">20h:46m:30s</p>
                                            </div>
                                            @* <div class="col">
                                                <p class="mb-0"><strong>Giá</strong></p>
                                                <p class="mb-0">@item.Price</p>
                                            </div> *@
                                            <div class="col">
                                                <p class="mb-0"><strong>Tạo bởi</strong></p>
                                                <p class="price mb-0">@item.CreateBy</p>
                                            </div>
                                            <div class="col">
                                                <p class="mb-0"><strong>Tạo lúc</strong></p>
                                                <p class="price mb-0">@item.CreateAt</p>
                                            </div>
                                            <div class="col">
                                                <p class="mb-0"><strong>Cập nhật lúc</strong></p>
                                                <p class="price mb-0">@item.UpdateAt</p>
                                            </div>
                                            <div class="col">
                                                <p class="mb-0"><strong>Trạng thái</strong></p>
                                                <p class="price mb-0">@item.Status</p>
                                            </div>
                                            <div class="btn-group col">
                                                <a asp-action="Edit" asp-route-id="@item.Id" asp-controller="Product" class="btn btn-info text-decoration-none">Details</a> 
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                }
            </tbody>
        </table>
    </div>
</div>
<script>
    async function confirmDelete(id) {
        if (confirm("Bạn có chắc chắn muốn xóa không?")) {
            try {
                const response = await fetch(`https://localhost:7095/api/Product/Delete?id=${id}`, { method: 'DELETE' });
                if (response.ok) {
                    alert("Xóa thành công");
                    window.location.href = 'https://localhost:7134/Admin/products/Index';
                } else {
                    alert("Xóa thất bại");
                }
            } catch (error) {
                console.error("Error:", error);
                alert("Đã xảy ra lỗi");
            }
        }
    }
</script>

